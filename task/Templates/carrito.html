{% extends 'navbar.html' %}

{% block body %}


<h1>Carrito de Compras</h1>
<header> <a href="/Home/"> <button>Home</button></a></header>

{% if request.session.carrito.items %}
{% for key, value in request.session.carrito.items %}
<tr>
    <td> Nombre: {{value.nombreart}}</td>
    <td>ID: {{ value.articulo_id }}</td>
    <td>Categoria: {{ value.tipo|default:"Sin tipo" }}</td>
    <td>cantidad: {{ value.cantidad }}</td>

    <td><img src="{{value.imagen}}" alt="{{value.nombreart}}" style="width: 50px; height: 50px;"></td>

    <td>
        {% if value.articulo_id  %}
            <a href="{% url 'mas' value.articulo_id %}" class="btn btn-primary">Agregar más</a>
            <a href="{% url 'menos' value.articulo_id %}" class="btn btn-danger">Eliminar uno</a>
            <a href="{% url 'borrar' value.articulo_id %}" class="btn btn-warning">Eliminar artículos</a>
        {% endif %}
            
    </td>
</tr>   
{% endfor %}
{% else %}
    <p>Tu carrito está vacío.</p>
{% endif %}
<div style="padding-bottom: 10px;">
    <tr>
        <th scope="row">Total:</th>
        <td colspan="2">$ {{total_factura}}</td>
    </tr>
    <a href="{% url 'cln' %}" class="btn btn-danger">Limpiar carrito</a>
    <a href="{% url 'pagar_webpay' %}?monto={{ total_factura }}" class="btn btn-success">Pagar</a>
</div>

{% endblock %}